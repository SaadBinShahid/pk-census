!function(a,b,c){window.pkcensus=window.pkcensus||c(a,b),b(document).ready(function(){var a=b("#mapCanvas");pkcensus.gmap.init(a[0],30.3894007,69.3532207,6,function(a){pkcensus.gmap.setMarkers()})})}(this,jQuery,function(a,b){"use strict";var c={};return c.gmap={iw:b(".app-content"),markers:[],init:function(a,b,c,d,e){var f=this;this.canvas=a,this.defaultPosition=new google.maps.LatLng(parseFloat(b),parseFloat(c)),this.zoom="undefined"!=typeof d?parseInt(d):8,this.mapDefaults={center:this.defaultPosition,zoom:this.zoom,zoomControl:!1,streetViewControl:!1,panControl:!1,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,mapTypeIds:["census_map",google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.HYBRID]}},this.mapStyles=[{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"landscape.natural.terrain",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"simplified"}]}],this.censusMap=new google.maps.StyledMapType(this.mapStyles,{name:"Population Census"});var g=this.map=new google.maps.Map(this.canvas,this.mapDefaults);this.map.mapTypes.set("census_map",this.censusMap),this.map.setMapTypeId("census_map"),window.onresize=function(){google.maps.event.trigger(f.map,"resize"),f.map.getCenter().equals(f.defaultPosition)||f.map.setCenter(f.defaultPosition)},google.maps.event.addListenerOnce(this.map,"tilesloaded",function(){return e&&"function"==typeof e?e.call(this,g):!1})},setMarkers:function(){var a=this;b.getJSON("./bower_components/pk-census/data/census-data.json",function(b,c){if(c&&"success"===c)for(var d=b.length-1;d>=0;d--){var e=b[d],f=new MarkerWithLabel({position:new google.maps.LatLng(e.location.lat,e.location.lng),map:a.map,icon:{path:google.maps.SymbolPath.CIRCLE,scale:4,strokeOpacity:.85,strokeColor:"#008000"},labelClass:"district-marker",labelContent:e.title,labelVisible:!1,labelAnchor:new google.maps.Point(-3,34)});a.markers.push(f),a.setMarkerInfo(a,f,e)}})},setMarkerInfo:function(a,b,c){var d=a;google.maps.event.addListener(b,"mouseover",function(){this.set("labelVisible",!0)}),google.maps.event.addListener(b,"mouseout",function(){this.set("labelVisible",!1)}),google.maps.event.addListener(b,"click",function(){return d.map.getCenter().equals(this.getPosition())?void 0:(d.map.panTo(this.getPosition()),10!==d.map.getZoom()&&d.map.setZoom(10),d.loadMarkerInfo(d,this,c))})},loadMarkerInfo:function(a,c,d){var e=a;e.iw.hasClass("info-window")?b(".animated").toggleClass(function(){return b(this).hasClass("fadeInUp")?"fadeOutDown":"fadeOutLeft"}).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){return e.setupHTML(e,c,d)}):e.iw.addClass("info-window").promise().done(function(){return e.setupHTML(e,c,d)})},closeIW:function(){var a=b(".info-window");a.length>0&&(a.empty(),a.removeClass("info-window"))},setupHTML:function(a,c,d){var e=a,f=b(".app-content").empty(),g=b("<h4 />",{html:'<i class="emblem-seal emblem-seal-'+d.province+'"></i> '+d.title,"class":"district-title animated fadeInRight"}).prependTo(f),h=b("<div />",{"class":"district-area district-divider animated fadeInUp clearfix"}).insertAfter(g);b("<p />",{"class":"text-center district-area-figure",html:d.area.value.toLocaleString("en-GB")+" "+d.area.unit_short}).appendTo(h);var i=b("<div />",{"class":"district-population district-divider animated fadeInUp",html:'<h4><i class="fa fa-male"></i> <i class="fa fa-female"></i> Population</h4> '}).insertAfter(h),j=b("<dl />",{"class":"dl-horizontal"}).appendTo(i);b("<dt />",{html:"1981"}).appendTo(j);b("<dd />",{html:d.population.year[1981]?d.population.year[1981].toLocaleString("en-GB"):"N/A"}).appendTo(j);b("<dt />",{html:"1998"}).appendTo(j);b("<dd />",{html:d.population.year[1998]?d.population.year[1998].toLocaleString("en-GB"):"N/A"}).appendTo(j);var k=b("<div />",{"class":"district-gender-ratio district-divider animated fadeInUp",html:"<strong>Gender ratio:</strong>"}).insertAfter(j);b("<div />",{"class":"progress-bar",role:"progressbar","aria-valuenow":d.population.gender.male.percentage,"aria-valuemin":"0","aria-valuemax":"100",html:'<i class="fa fa-male"></i> '+d.population.gender.male.percentage+"%"}).css("width",d.population.gender.male.percentage+"%").appendTo(k).wrap(b("<div />",{"class":"progress progress-gender-ratio"})),b("<div />",{"class":"progress-bar progress-bar-success",role:"progressbar","aria-valuenow":d.population.gender.female.percentage,"aria-valuemin":"0","aria-valuemax":"100",html:'<i class="fa fa-female"></i> '+d.population.gender.female.percentage+"%"}).css("width",d.population.gender.female.percentage+"%").appendTo(k).wrap(b("<div />",{"class":"progress progress-gender-ratio"})),b("<p />",{html:'<i class="fa fa-info-circle"></i> '+d.population.ratio.value+" "+d.population.ratio.type}).appendTo(k),b("<p />",{html:'<i class="fa fa-info-circle"></i> '+d.population.density.value+" persons "+d.population.density.unit_short}).appendTo(k);var l=b("<div />",{"class":"district-urban-rural",html:'<h4><i class="fa fa-building"></i> Urban / Rural ratio</h4>'}).insertAfter(k);b("<div />",{"class":"progress-bar progress-bar-danger",role:"progressbar","aria-valuenow":d.population.urban.percentage,"aria-valuemin":"0","aria-valuemax":"100",html:'<i class="fa fa-building"></i> Urban '+d.population.urban.percentage+"%"}).css("width",d.population.urban.percentage+"%").appendTo(l).wrap(b("<div />",{"class":"progress progress-urban-rural"})),b("<div />",{"class":"progress-bar progress-bar-warning",role:"progressbar","aria-valuenow":d.population.rural.percentage,"aria-valuemin":"0","aria-valuemax":"100",html:'<i class="fa fa-home"></i> Rural '+d.population.rural.percentage+"%"}).css("width",d.population.rural.percentage+"%").appendTo(l).wrap(b("<div />",{"class":"progress progress-urban-rural"}));var m=b("<div />",{"class":"district-litracy-ratio district-divider animated fadeInUp",html:'<h4><i class="fa fa-graduation-cap"></i> Litracy ratio:</h4>'}).insertAfter(i);b("<div />",{"class":"progress-bar progress-bar-success",role:"progressbar","aria-valuenow":d.litracy_ratio.percentage,"aria-valuemin":"0","aria-valuemax":"100",html:"Age "+d.litracy_ratio.age+" | "+d.litracy_ratio.percentage+"%"}).css("width",d.litracy_ratio.percentage+"%").appendTo(m).wrap(b("<div />",{"class":"progress progress-litracy-ratio"}));var n=b("<div />",{"class":"district-household district-divider animated fadeInUp",html:'<h4><i class="fa fa-users"></i> Household average:</h4>'}).insertAfter(m);b("<p />",{"class":"district-household-average",html:d.household.size+" persons per house"}).appendTo(n);var o=b("<div />",{"class":"district-housing district-divider animated fadeInUp",html:'<h4><i class="fa fa-home"></i> Housing</h4>'}).insertAfter(n);if(b("<p />",{html:"Total: "+d.housing.units.total.toLocaleString("en-GB")}).appendTo(o),d.housing.have_utilities.electricity&&b("<p />",{html:'<i class="fa fa-lightbulb-o"></i> Electricity: '+d.housing.have_utilities.electricity.value.toLocaleString("en-GB")+" &ndash; "+d.housing.have_utilities.electricity.percentage+"%"}).appendTo(o),d.housing.have_utilities.water&&b("<p />",{html:'<i class="fa fa-tint"></i> Water: '+d.housing.have_utilities.water.value.toLocaleString("en-GB")+" &ndash; "+d.housing.have_utilities.water.percentage+"%"}).appendTo(o),d.housing.have_utilities.gas&&b("<p />",{html:'<i class="fa fa-fire"></i> Gas: '+d.housing.have_utilities.gas.value.toLocaleString("en-GB")+" &ndash; "+d.housing.have_utilities.gas.percentage+"%"}).appendTo(o),d.boundary&&d.boundary.path){var p=document.createElementNS("http://www.w3.org/2000/svg","svg"),q=p.namespaceURI;p.setAttribute("version","1.1"),p.setAttribute("id",d.boundary.meta.id),p.setAttribute("width",parseInt(d.boundary.meta.width)/1.25),p.setAttribute("height",parseInt(d.boundary.meta.height)/1.25),p.setAttribute("x",d.boundary.meta.x),p.setAttribute("y",d.boundary.meta.y),p.setAttribute("viewBox",d.boundary.meta.viewBox),p.setAttribute("enable-background","new "+d.boundary.meta.viewBox),p.setAttribute("xml:space","preserved");var r=document.createElementNS(q,"path");r.setAttribute("class","district-boundary"),r.setAttribute("fill","#ffffff"),r.setAttribute("stroke","#006838"),r.setAttribute("stroke-width","1.15"),r.setAttribute("d",d.boundary.path.join(" ")),p.appendChild(r),h[0].appendChild(p),b(p).wrap(b("<div />",{"class":"district-svg text-center"}))}b("<button />",{"class":"close clearfix",html:"&times;"}).prependTo(f).on("click",function(){return e.map.setOptions(e.mapDefaults),e.closeIW()})}},c});